                </div>
            </div>
        </div>
        
        <!-- User Journey Diagram -->
        <div id="userjourney" class="diagram-container">
            <svg viewBox="0 0 1400 1100" xmlns="http://www.w3.org/2000/svg">
                <rect width="1400" height="1100" fill="#f8f9fc"/>
                
                <text x="700" y="35" font-size="26" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Complete User Journey
                </text>
                <text x="700" y="60" font-size="14" text-anchor="middle" fill="#718096">
                    From Discovery to Profit Realization
                </text>
                
                <!-- Timeline Line -->
                <line x1="100" y1="150" x2="100" y2="1000" stroke="#cbd5e0" stroke-width="4"/>
                
                <!-- Stage 1: Discovery & Research -->
                <circle cx="100" cy="150" r="20" fill="#805ad5" stroke="#553c9a" stroke-width="3"/>
                <text x="100" y="158" font-size="16" font-weight="bold" text-anchor="middle" fill="white">1</text>
                
                <rect x="150" y="110" width="1200" height="130" rx="10" fill="#f3e8ff" stroke="#805ad5" stroke-width="3"/>
                <text x="750" y="140" font-size="18" font-weight="bold" text-anchor="middle" fill="#553c9a">
                    Discovery &amp; Research
                </text>
                
                <rect x="180" y="160" width="280" height="60" rx="6" fill="#fff" stroke="#805ad5" stroke-width="2"/>
                <text x="320" y="182" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Browse Strategies</text>
                <text x="320" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Review mandate &amp; risk profile</text>
                <text x="320" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Check historical performance</text>
                
                <rect x="480" y="160" width="280" height="60" rx="6" fill="#fff" stroke="#805ad5" stroke-width="2"/>
                <text x="620" y="182" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Verify Security</text>
                <text x="620" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Audit reports (Cantina)</text>
                <text x="620" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Security Module TVL</text>
                
                <rect x="780" y="160" width="280" height="60" rx="6" fill="#fff" stroke="#805ad5" stroke-width="2"/>
                <text x="920" y="182" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Review Team</text>
                <text x="920" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Operator track record</text>
                <text x="920" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Risk Manager credentials</text>
                
                <rect x="1080" y="160" width="250" height="60" rx="6" fill="#fff" stroke="#805ad5" stroke-width="2"/>
                <text x="1205" y="182" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Understand Fees</text>
                <text x="1205" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Fixed fees (AUM-based)</text>
                <text x="1205" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Performance fees</text>
                
                <!-- Stage 2: Initial Deposit -->
                <circle cx="100" cy="290" r="20" fill="#4299e1" stroke="#2c5282" stroke-width="3"/>
                <text x="100" y="298" font-size="16" font-weight="bold" text-anchor="middle" fill="white">2</text>
                
                <rect x="150" y="250" width="1200" height="130" rx="10" fill="#e6f3ff" stroke="#4299e1" stroke-width="3"/>
                <text x="750" y="280" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c5282">
                    Initial Deposit
                </text>
                
                <rect x="180" y="300" width="260" height="60" rx="6" fill="#fff" stroke="#4299e1" stroke-width="2"/>
                <text x="310" y="322" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Connect Wallet</text>
                <text x="310" y="340" font-size="10" text-anchor="middle" fill="#4a5568">• Ethereum/L2 wallet</text>
                <text x="310" y="355" font-size="10" text-anchor="middle" fill="#4a5568">• Approve accounting token</text>
                
                <rect x="460" y="300" width="260" height="60" rx="6" fill="#fff" stroke="#4299e1" stroke-width="2"/>
                <text x="590" y="322" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Deposit Funds</text>
                <text x="590" y="340" font-size="10" text-anchor="middle" fill="#4a5568">• Enter amount (e.g., USDC)</text>
                <text x="590" y="355" font-size="10" text-anchor="middle" fill="#4a5568">• Confirm transaction</text>
                
                <rect x="740" y="300" width="260" height="60" rx="6" fill="#fff" stroke="#4299e1" stroke-width="2"/>
                <text x="870" y="322" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Receive Shares</text>
                <text x="870" y="340" font-size="10" text-anchor="middle" fill="#4a5568">• Machine Token (ERC20)</text>
                <text x="870" y="355" font-size="10" text-anchor="middle" fill="#4a5568">• Shares = Deposit / Price</text>
                
                <rect x="1020" y="300" width="310" height="60" rx="6" fill="#fef5e7" stroke="#f39c12" stroke-width="2"/>
                <text x="1175" y="322" font-size="12" font-weight="bold" text-anchor="middle" fill="#d68910">💡 Optional: Pre-Deposit</text>
                <text x="1175" y="340" font-size="9" text-anchor="middle" fill="#2d3748">Deposit before launch to earn</text>
                <text x="1175" y="353" font-size="9" text-anchor="middle" fill="#2d3748">baseline yield during pre-deposit phase</text>
                
                <line x1="440" y1="330" x2="460" y2="330" stroke="#4299e1" stroke-width="2" marker-end="url(#arrowj1)"/>
                <line x1="720" y1="330" x2="740" y2="330" stroke="#4299e1" stroke-width="2" marker-end="url(#arrowj1)"/>
                
                <!-- Stage 3: Hold & Earn -->
                <circle cx="100" cy="430" r="20" fill="#48bb78" stroke="#2f855a" stroke-width="3"/>
                <text x="100" y="438" font-size="16" font-weight="bold" text-anchor="middle" fill="white">3</text>
                
                <rect x="150" y="390" width="1200" height="150" rx="10" fill="#e6ffe6" stroke="#48bb78" stroke-width="3"/>
                <text x="750" y="420" font-size="18" font-weight="bold" text-anchor="middle" fill="#2f855a">
                    Hold &amp; Earn (Passive Phase)
                </text>
                
                <rect x="180" y="440" width="350" height="80" rx="6" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="355" y="462" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Your Funds Are Working</text>
                <text x="355" y="480" font-size="10" text-anchor="middle" fill="#4a5568">• Operator deploys to DeFi protocols</text>
                <text x="355" y="495" font-size="10" text-anchor="middle" fill="#4a5568">• Generates yield across chains</text>
                <text x="355" y="510" font-size="10" text-anchor="middle" fill="#4a5568">• Harvests &amp; compounds rewards</text>
                
                <rect x="550" y="440" width="350" height="80" rx="6" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="725" y="462" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Share Price Increases</text>
                <text x="725" y="480" font-size="10" text-anchor="middle" fill="#4a5568">• AUM grows from yield</text>
                <text x="725" y="495" font-size="10" text-anchor="middle" fill="#4a5568">• Price = AUM / Total Shares</text>
                <text x="725" y="510" font-size="10" text-anchor="middle" fill="#4a5568">• Your holdings appreciate</text>
                
                <rect x="920" y="440" width="410" height="80" rx="6" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="1125" y="462" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Monitor Performance</text>
                <text x="1125" y="480" font-size="10" text-anchor="middle" fill="#4a5568">• Track share price changes</text>
                <text x="1125" y="495" font-size="10" text-anchor="middle" fill="#4a5568">• View position allocations</text>
                <text x="1125" y="510" font-size="10" text-anchor="middle" fill="#4a5568">• Review operator activity</text>
                
                <!-- Stage 4: Optional Security Participation -->
                <circle cx="100" cy="590" r="20" fill="#ed8936" stroke="#c05621" stroke-width="3"/>
                <text x="100" y="598" font-size="16" font-weight="bold" text-anchor="middle" fill="white">4</text>
                
                <rect x="150" y="550" width="1200" height="130" rx="10" fill="#fff4e6" stroke="#ed8936" stroke-width="3"/>
                <text x="750" y="580" font-size="18" font-weight="bold" text-anchor="middle" fill="#c05621">
                    Optional: Participate in Security Module
                </text>
                
                <rect x="180" y="600" width="280" height="60" rx="6" fill="#fff" stroke="#ed8936" stroke-width="2"/>
                <text x="320" y="622" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Lock Machine Tokens</text>
                <text x="320" y="640" font-size="10" text-anchor="middle" fill="#4a5568">• Provide insurance coverage</text>
                <text x="320" y="655" font-size="10" text-anchor="middle" fill="#4a5568">• Receive Security Tokens</text>
                
                <rect x="480" y="600" width="280" height="60" rx="6" fill="#fff" stroke="#ed8936" stroke-width="2"/>
                <text x="620" y="622" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Earn Boosted Yields</text>
                <text x="620" y="640" font-size="10" text-anchor="middle" fill="#4a5568">• Share of protocol fees</text>
                <text x="620" y="655" font-size="10" text-anchor="middle" fill="#4a5568">• Higher returns for risk</text>
                
                <rect x="780" y="600" width="280" height="60" rx="6" fill="#fff" stroke="#ed8936" stroke-width="2"/>
                <text x="920" y="622" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Accept Slashing Risk</text>
                <text x="920" y="640" font-size="10" text-anchor="middle" fill="#4a5568">• Tokens can be burned</text>
                <text x="920" y="655" font-size="10" text-anchor="middle" fill="#4a5568">• To cover vault losses</text>
                
                <rect x="1080" y="600" width="250" height="60" rx="6" fill="#fef5e7" stroke="#f39c12" stroke-width="2"/>
                <text x="1205" y="622" font-size="12" font-weight="bold" text-anchor="middle" fill="#2d3748">Unstake Anytime</text>
                <text x="1205" y="640" font-size="9" text-anchor="middle" fill="#4a5568">• 7+ day cooldown period</text>
                <text x="1205" y="655" font-size="9" text-anchor="middle" fill="#4a5568">• Receive NFT receipt</text>
                
                <!-- Stage 5: Cross-Chain Transfer -->
                <circle cx="100" cy="730" r="20" fill="#805ad5" stroke="#553c9a" stroke-width="3"/>
                <text x="100" y="738" font-size="16" font-weight="bold" text-anchor="middle" fill="white">5</text>
                
                <rect x="150" y="690" width="1200" height="130" rx="10" fill="#f3e8ff" stroke="#805ad5" stroke-width="3"/>
                <text x="750" y="720" font-size="18" font-weight="bold" text-anchor="middle" fill="#553c9a">
                    Optional: Transfer Machine Tokens Cross-Chain
                </text>
                
                <rect x="180" y="740" width="350" height="60" rx="6" fill="#fff" stroke="#805ad5" stroke-width="2"/>
                <text x="355" y="762" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Use Wormhole NTT</text>
                <text x="355" y="780" font-size="10" text-anchor="middle" fill="#4a5568">• Bridge to L2s or Solana</text>
                <text x="355" y="795" font-size="10" text-anchor="middle" fill="#4a5568">• Fast &amp; secure transfers</text>
                
                <rect x="550" y="740" width="350" height="60" rx="6" fill="#fff" stroke="#805ad5" stroke-width="2"/>
                <text x="725" y="762" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Trade or Use DeFi</text>
                <text x="725" y="780" font-size="10" text-anchor="middle" fill="#4a5568">• Trade on DEXs</text>
                <text x="725" y="795" font-size="10" text-anchor="middle" fill="#4a5568">• Use as collateral</text>
                
                <rect x="920" y="740" width="410" height="60" rx="6" fill="#fef5e7" stroke="#f39c12" stroke-width="2"/>
                <text x="1125" y="762" font-size="12" font-weight="bold" text-anchor="middle" fill="#d68910">
                    💡 Maintain Same Share Value
                </text>
                <text x="1125" y="780" font-size="9" text-anchor="middle" fill="#2d3748">Tokens represent same underlying assets</text>
                <text x="1125" y="793" font-size="9" text-anchor="middle" fill="#2d3748">regardless of which chain they're on</text>
                
                <!-- Stage 6: Redemption Decision -->
                <circle cx="100" cy="870" r="20" fill="#e53e3e" stroke="#c53030" stroke-width="3"/>
                <text x="100" y="878" font-size="16" font-weight="bold" text-anchor="middle" fill="white">6</text>
                
                <rect x="150" y="830" width="1200" height="130" rx="10" fill="#ffe6e6" stroke="#e53e3e" stroke-width="3"/>
                <text x="750" y="860" font-size="18" font-weight="bold" text-anchor="middle" fill="#c53030">
                    Exit: Request Redemption
                </text>
                
                <rect x="180" y="880" width="280" height="60" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="320" y="902" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">1. Request Redemption</text>
                <text x="320" y="920" font-size="10" text-anchor="middle" fill="#4a5568">• Lock Machine Tokens</text>
                <text x="320" y="935" font-size="10" text-anchor="middle" fill="#4a5568">• Receive NFT receipt</text>
                
                <rect x="480" y="880" width="280" height="60" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="620" y="902" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">2. Wait for Settlement</text>
                <text x="620" y="920" font-size="10" text-anchor="middle" fill="#4a5568">• FIFO queue</text>
                <text x="620" y="935" font-size="10" text-anchor="middle" fill="#4a5568">• Operator closes positions</text>
                
                <rect x="780" y="880" width="280" height="60" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="920" y="902" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">3. Claim Funds</text>
                <text x="920" y="920" font-size="10" text-anchor="middle" fill="#4a5568">• Burn NFT</text>
                <text x="920" y="935" font-size="10" text-anchor="middle" fill="#4a5568">• Receive accounting tokens</text>
                
                <rect x="1080" y="880" width="250" height="60" rx="6" fill="#e6fffa" stroke="#319795" stroke-width="2"/>
                <text x="1205" y="902" font-size="12" font-weight="bold" text-anchor="middle" fill="#234e52">✓ Profit Realized</text>
                <text x="1205" y="920" font-size="9" text-anchor="middle" fill="#2d3748">Share price growth</text>
                <text x="1205" y="933" font-size="9" text-anchor="middle" fill="#2d3748">converted to tokens</text>
                
                <line x1="460" y1="910" x2="480" y2="910" stroke="#e53e3e" stroke-width="2" marker-end="url(#arrowj1)"/>
                <line x1="760" y1="910" x2="780" y2="910" stroke="#e53e3e" stroke-width="2" marker-end="url(#arrowj1)"/>
                <line x1="1000" y1="910" x2="1080" y2="910" stroke="#48bb78" stroke-width="2" marker-end="url(#arrowj2)"/>
                
                <!-- Summary Box -->
                <rect x="150" y="990" width="1200" height="90" rx="10" fill="#edf2f7" stroke="#718096" stroke-width="3"/>
                <text x="750" y="1020" font-size="16" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    🎯 User Value Proposition
                </text>
                <text x="750" y="1045" font-size="12" text-anchor="middle" fill="#4a5568">
                    Deposit once • Earn passive yield from professional DeFi strategies across multiple chains
                </text>
                <text x="750" y="1065" font-size="12" text-anchor="middle" fill="#4a5568">
                    Non-custodial • Transparent • Audited • Protected by Security Module
                </text>
                
                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrowj1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#2d3748"/>
                    </marker>
                    <marker id="arrowj2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#48bb78"/>
                    </marker>
                </defs>
            </svg>
        </div>
        
        <!-- Governance Flow Diagram -->
        <div id="governance" class="diagram-container">
            <svg viewBox="0 0 1400 1400" xmlns="http://www.w3.org/2000/svg">
                <rect width="1400" height="1400" fill="#f8f9fc"/>
                
                <text x="700" y="35" font-size="26" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Governance &amp; Control Flow
                </text>
                <text x="700" y="60" font-size="14" text-anchor="middle" fill="#718096">
                    Multi-layered Governance with Checks &amp; Balances
                </text>
                
                <!-- Governance Entities -->
                <rect x="50" y="90" width="1300" height="180" rx="10" fill="#ffe6e6" stroke="#e53e3e" stroke-width="3"/>
                <text x="700" y="120" font-size="18" font-weight="bold" text-anchor="middle" fill="#c53030">
                    Governance Entities &amp; Roles
                </text>
                
                <rect x="80" y="140" width="230" height="110" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="195" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#c53030">Operator</text>
                <text x="195" y="185" font-size="10" text-anchor="middle" fill="#4a5568">• Daily operations</text>
                <text x="195" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Position management</text>
                <text x="195" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Harvesting &amp; swaps</text>
                <text x="195" y="230" font-size="10" text-anchor="middle" fill="#4a5568">• Cross-chain bridging</text>
                
                <rect x="330" y="140" width="230" height="110" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="445" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#c53030">Risk Manager</text>
                <text x="445" y="185" font-size="10" text-anchor="middle" fill="#4a5568">• Risk parameters</text>
                <text x="445" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Merkle Root updates</text>
                <text x="445" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Base token curation</text>
                <text x="445" y="230" font-size="10" text-anchor="middle" fill="#4a5568">• Risk policy compliance</text>
                
                <rect x="580" y="140" width="230" height="110" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="695" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#c53030">Security Council</text>
                <text x="695" y="185" font-size="10" text-anchor="middle" fill="#4a5568">• Veto power</text>
                <text x="695" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Recovery Mode trigger</text>
                <text x="695" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Monitor activities</text>
                <text x="695" y="230" font-size="10" text-anchor="middle" fill="#4a5568">• Operator slashing</text>
                
                <rect x="830" y="140" width="230" height="110" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="945" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#c53030">Root Guardians</text>
                <text x="945" y="185" font-size="10" text-anchor="middle" fill="#4a5568">• Merkle Root veto</text>
                <text x="945" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Instruction control</text>
                <text x="945" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Security oversight</text>
                <text x="945" y="230" font-size="10" text-anchor="middle" fill="#4a5568">• Independent review</text>
                
                <rect x="1080" y="140" width="240" height="110" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="1200" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="#c53030">Makina DAO</text>
                <text x="1200" y="185" font-size="10" text-anchor="middle" fill="#4a5568">• Protocol governance</text>
                <text x="1200" y="200" font-size="10" text-anchor="middle" fill="#4a5568">• Fee distribution</text>
                <text x="1200" y="215" font-size="10" text-anchor="middle" fill="#4a5568">• Oracle registry control</text>
                <text x="1200" y="230" font-size="10" text-anchor="middle" fill="#4a5568">• Strategic decisions</text>
                
                <!-- Flow 1: Normal Operations -->
                <rect x="50" y="300" width="630" height="350" rx="10" fill="#e6f3ff" stroke="#4299e1" stroke-width="3"/>
                <text x="365" y="330" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c5282">
                    Flow 1: Normal Operations (Daily)
                </text>
                
                <circle cx="100" cy="370" r="15" fill="#4299e1"/>
                <text x="100" y="377" font-size="14" font-weight="bold" text-anchor="middle" fill="white">1</text>
                
                <rect x="140" y="355" width="500" height="50" rx="6" fill="#fff" stroke="#4299e1" stroke-width="2"/>
                <text x="390" y="375" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Operator Executes Strategy
                </text>
                <text x="390" y="395" font-size="10" text-anchor="middle" fill="#4a5568">
                    Deploy positions, harvest rewards, perform swaps, bridge assets
                </text>
                
                <line x1="390" y1="405" x2="390" y2="430" stroke="#4299e1" stroke-width="2" marker-end="url(#arrowg1)"/>
                
                <circle cx="100" cy="455" r="15" fill="#48bb78"/>
                <text x="100" y="462" font-size="14" font-weight="bold" text-anchor="middle" fill="white">2</text>
                
                <rect x="140" y="440" width="500" height="50" rx="6" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="390" y="460" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Constraints Applied
                </text>
                <text x="390" y="480" font-size="10" text-anchor="middle" fill="#4a5568">
                    Max loss caps, cooldown periods, pre-approved instructions only
                </text>
                
                <line x1="390" y1="490" x2="390" y2="515" stroke="#48bb78" stroke-width="2" marker-end="url(#arrowg1)"/>
                
                <circle cx="100" cy="540" r="15" fill="#f6ad55"/>
                <text x="100" y="547" font-size="14" font-weight="bold" text-anchor="middle" fill="white">3</text>
                
                <rect x="140" y="525" width="500" height="50" rx="6" fill="#fff" stroke="#f6ad55" stroke-width="2"/>
                <text x="390" y="545" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Monitoring &amp; Detection
                </text>
                <text x="390" y="565" font-size="10" text-anchor="middle" fill="#4a5568">
                    Makina Foundation monitors all activity • Hypernative Guardian scans
                </text>
                
                <line x1="390" y1="575" x2="390" y2="600" stroke="#f6ad55" stroke-width="2" marker-end="url(#arrowg1)"/>
                
                <circle cx="100" cy="625" r="15" fill="#805ad5"/>
                <text x="100" y="632" font-size="14" font-weight="bold" text-anchor="middle" fill="white">4</text>
                
                <rect x="140" y="610" width="500" height="20" rx="4" fill="#805ad5"/>
                <text x="390" y="625" font-size="11" font-weight="bold" text-anchor="middle" fill="white">
                    ✓ If Everything Normal → Continue Operations
                </text>
                
                <!-- Risk Detection Branch -->
                <line x1="390" y1="575" x2="520" y2="575" stroke="#e53e3e" stroke-width="2"/>
                <line x1="520" y1="575" x2="520" y2="610" stroke="#e53e3e" stroke-width="2" marker-end="url(#arrowg2)"/>
                
                <rect x="470" y="610" width="100" height="25" rx="4" fill="#e53e3e"/>
                <text x="520" y="627" font-size="10" font-weight="bold" text-anchor="middle" fill="white">
                    ⚠️ Risk Detected
                </text>
                
                <line x1="520" y1="635" x2="520" y2="670" stroke="#e53e3e" stroke-width="3" stroke-dasharray="5,5" marker-end="url(#arrowg2)"/>
                <text x="545" y="655" font-size="10" font-weight="bold" fill="#e53e3e">
                    See Flow 3
                </text>
                
                <!-- Flow 2: Merkle Root Update -->
                <rect x="720" y="300" width="630" height="350" rx="10" fill="#fff4e6" stroke="#f39c12" stroke-width="3"/>
                <text x="1035" y="330" font-size="18" font-weight="bold" text-anchor="middle" fill="#d68910">
                    Flow 2: Merkle Root Update
                </text>
                
                <circle cx="770" cy="370" r="15" fill="#4299e1"/>
                <text x="770" y="377" font-size="14" font-weight="bold" text-anchor="middle" fill="white">1</text>
                
                <rect x="810" y="355" width="500" height="50" rx="6" fill="#fff" stroke="#4299e1" stroke-width="2"/>
                <text x="1060" y="375" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Operator Submits PR
                </text>
                <text x="1060" y="395" font-size="10" text-anchor="middle" fill="#4a5568">
                    New instructions to makina-merkletree repository
                </text>
                
                <line x1="1060" y1="405" x2="1060" y2="430" stroke="#4299e1" stroke-width="2" marker-end="url(#arrowg1)"/>
                
                <circle cx="770" cy="455" r="15" fill="#48bb78"/>
                <text x="770" y="462" font-size="14" font-weight="bold" text-anchor="middle" fill="white">2</text>
                
                <rect x="810" y="440" width="500" height="50" rx="6" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="1060" y="460" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Review &amp; Approval
                </text>
                <text x="1060" y="480" font-size="10" text-anchor="middle" fill="#4a5568">
                    Security Council + Makina developers review and approve
                </text>
                
                <line x1="1060" y1="490" x2="1060" y2="515" stroke="#48bb78" stroke-width="2" marker-end="url(#arrowg1)"/>
                
                <circle cx="770" cy="540" r="15" fill="#805ad5"/>
                <text x="770" y="547" font-size="14" font-weight="bold" text-anchor="middle" fill="white">3</text>
                
                <rect x="810" y="525" width="500" height="50" rx="6" fill="#fff" stroke="#805ad5" stroke-width="2"/>
                <text x="1060" y="545" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Risk Manager Schedules Update
                </text>
                <text x="1060" y="565" font-size="10" text-anchor="middle" fill="#4a5568">
                    Submits new Merkle Root → Triggers timelock
                </text>
                
                <line x1="1060" y1="575" x2="1060" y2="600" stroke="#805ad5" stroke-width="2" marker-end="url(#arrowg1)"/>
                
                <circle cx="770" cy="625" r="15" fill="#f6ad55"/>
                <text x="770" y="632" font-size="14" font-weight="bold" text-anchor="middle" fill="white">4</text>
                
                <rect x="810" y="605" width="240" height="60" rx="6" fill="#fef5e7" stroke="#f39c12" stroke-width="2"/>
                <text x="930" y="625" font-size="12" font-weight="bold" text-anchor="middle" fill="#d68910">
                    ⏱️ Timelock Period
                </text>
                <text x="930" y="643" font-size="9" text-anchor="middle" fill="#2d3748">
                    Community notification
                </text>
                <text x="930" y="657" font-size="9" text-anchor="middle" fill="#2d3748">
                    Veto window active
                </text>
                
                <!-- Veto branch -->
                <rect x="1070" y="605" width="110" height="30" rx="4" fill="#e53e3e"/>
                <text x="1125" y="625" font-size="10" font-weight="bold" text-anchor="middle" fill="white">
                    Security Council
                </text>
                
                <rect x="1070" y="645" width="110" height="20" rx="4" fill="#e53e3e"/>
                <text x="1125" y="659" font-size="9" font-weight="bold" text-anchor="middle" fill="white">
                    Root Guardians
                </text>
                
                <line x1="1180" y1="625" x2="1220" y2="625" stroke="#e53e3e" stroke-width="2" marker-end="url(#arrowg2)"/>
                <line x1="1180" y1="655" x2="1220" y2="655" stroke="#e53e3e" stroke-width="2" marker-end="url(#arrowg2)"/>
                
                <rect x="1220" y="610" width="90" height="60" rx="4" fill="#e53e3e"/>
                <text x="1265" y="632" font-size="10" font-weight="bold" text-anchor="middle" fill="white">
                    Can Veto
                </text>
                <text x="1265" y="650" font-size="8" text-anchor="middle" fill="white">
                    Block update
                </text>
                <text x="1265" y="663" font-size="8" text-anchor="middle" fill="white">
                    if risky
                </text>
                
                <!-- No veto path -->
                <line x1="930" y1="665" x2="930" y2="690" stroke="#48bb78" stroke-width="2" marker-end="url(#arrowg3)"/>
                
                <rect x="840" y="690" width="180" height="30" rx="4" fill="#48bb78"/>
                <text x="930" y="710" font-size="11" font-weight="bold" text-anchor="middle" fill="white">
                    ✓ No Veto → Root Active
                </text>
                
                <!-- Flow 3: Emergency Response -->
                <rect x="50" y="680" width="1300" height="480" rx="10" fill="#ffe6e6" stroke="#e53e3e" stroke-width="3"/>
                <text x="700" y="710" font-size="18" font-weight="bold" text-anchor="middle" fill="#c53030">
                    Flow 3: Emergency Response &amp; Recovery Mode
                </text>
                
                <circle cx="100" cy="750" r="15" fill="#e53e3e"/>
                <text x="100" y="757" font-size="14" font-weight="bold" text-anchor="middle" fill="white">1</text>
                
                <rect x="140" y="730" width="580" height="70" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="430" y="755" font-size="13" font-weight="bold" text-anchor="middle" fill="#c53030">
                    Risk Detected
                </text>
                <text x="430" y="775" font-size="10" text-anchor="middle" fill="#4a5568">
                    • Suspicious activity • Operator inactivity • Sharp price drop
                </text>
                <text x="430" y="790" font-size="10" text-anchor="middle" fill="#4a5568">
                    • Malicious behavior • Protocol exploit • Unusual transactions
                </text>
                
                <line x1="430" y1="800" x2="430" y2="825" stroke="#e53e3e" stroke-width="3" marker-end="url(#arrowg2)"/>
                
                <circle cx="100" cy="850" r="15" fill="#ed8936"/>
                <text x="100" y="857" font-size="14" font-weight="bold" text-anchor="middle" fill="white">2</text>
                
                <rect x="140" y="830" width="580" height="60" rx="6" fill="#fff" stroke="#ed8936" stroke-width="2"/>
                <text x="430" y="855" font-size="13" font-weight="bold" text-anchor="middle" fill="#c05621">
                    Security Council Activates Recovery Mode
                </text>
                <text x="430" y="875" font-size="10" text-anchor="middle" fill="#4a5568">
                    Emergency powers triggered • Operator permissions revoked
                </text>
                
                <line x1="430" y1="890" x2="430" y2="915" stroke="#ed8936" stroke-width="3" marker-end="url(#arrowg2)"/>
                
                <!-- Recovery Mode Actions -->
                <rect x="140" y="915" width="1170" height="220" rx="8" fill="#fff4e6" stroke="#f39c12" stroke-width="2"/>
                <text x="725" y="940" font-size="14" font-weight="bold" text-anchor="middle" fill="#d68910">
                    Recovery Mode Actions
                </text>
                
                <rect x="170" y="960" width="260" height="80" rx="6" fill="#fff" stroke="#4299e1" stroke-width="2"/>
                <text x="300" y="985" font-size="12" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Machine Controls
                </text>
                <text x="300" y="1005" font-size="9" text-anchor="middle" fill="#4a5568">
                    ❌ New deposits disabled
                </text>
                <text x="300" y="1020" font-size="9" text-anchor="middle" fill="#4a5568">
                    ❌ AUM updates paused
                </text>
                <text x="300" y="1035" font-size="9" text-anchor="middle" fill="#4a5568">
                    ❌ Outbound bridges blocked
                </text>
                
                <rect x="450" y="960" width="260" height="80" rx="6" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="580" y="985" font-size="12" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Caliber Controls
                </text>
                <text x="580" y="1005" font-size="9" text-anchor="middle" fill="#4a5568">
                    ✓ Positions can only decrease
                </text>
                <text x="580" y="1020" font-size="9" text-anchor="middle" fill="#4a5568">
                    ✓ Swaps to accounting token only
                </text>
                <text x="580" y="1035" font-size="9" text-anchor="middle" fill="#4a5568">
                    ✓ Inbound bridges only
                </text>
                
                <rect x="730" y="960" width="260" height="80" rx="6" fill="#fff" stroke="#805ad5" stroke-width="2"/>
                <text x="860" y="985" font-size="12" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Security Council Acts
                </text>
                <text x="860" y="1005" font-size="9" text-anchor="middle" fill="#4a5568">
                    • Takes operator permissions
                </text>
                <text x="860" y="1020" font-size="9" text-anchor="middle" fill="#4a5568">
                    • Closes risky positions
                </text>
                <text x="860" y="1035" font-size="9" text-anchor="middle" fill="#4a5568">
                    • Secures user funds
                </text>
                
                <rect x="1010" y="960" width="260" height="80" rx="6" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="1140" y="985" font-size="12" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Optional: Slashing
                </text>
                <text x="1140" y="1005" font-size="9" text-anchor="middle" fill="#4a5568">
                    • Burn operator tokens
                </text>
                <text x="1140" y="1020" font-size="9" text-anchor="middle" fill="#4a5568">
                    • Via Security Module
                </text>
                <text x="1140" y="1035" font-size="9" text-anchor="middle" fill="#4a5568">
                    • Compensate losses
                </text>
                
                <circle cx="100" cy="1090" r="15" fill="#48bb78"/>
                <text x="100" y="1097" font-size="14" font-weight="bold" text-anchor="middle" fill="white">3</text>
                
                <rect x="170" y="1070" width="1100" height="60" rx="6" fill="#e6fffa" stroke="#319795" stroke-width="2"/>
                <text x="720" y="1093" font-size="13" font-weight="bold" text-anchor="middle" fill="#234e52">
                    Resolution &amp; Investigation
                </text>
                <text x="720" y="1113" font-size="10" text-anchor="middle" fill="#2d3748">
                    Security Council stabilizes situation → Investigates root cause → 
                    Implements fixes → Decides when safe to exit Recovery Mode
                </text>
                
                <line x1="720" y1="1130" x2="720" y2="1155" stroke="#48bb78" stroke-width="3" marker-end="url(#arrowg3)"/>
                
                <circle cx="100" cy="1175" r="15" fill="#805ad5"/>
                <text x="100" y="1182" font-size="14" font-weight="bold" text-anchor="middle" fill="white">4</text>
                
                <rect x="170" y="1155" width="1100" height="50" rx="6" fill="#f3e8ff" stroke="#805ad5" stroke-width="2"/>
                <text x="720" y="1178" font-size="13" font-weight="bold" text-anchor="middle" fill="#553c9a">
                    ✓ Exit Recovery Mode
                </text>
                <text x="720" y="1195" font-size="10" text-anchor="middle" fill="#2d3748">
                    Security Council returns operator permissions → Normal operations resume → 
                    Continue monitoring for any issues
                </text>
                
                <!-- Safe Architecture -->
                <rect x="750" y="730" width="570" height="120" rx="8" fill="#edf2f7" stroke="#718096" stroke-width="2"/>
                <text x="1035" y="755" font-size="14" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    🔒 Safe Security Structure
                </text>
                
                <text x="780" y="780" font-size="10" fill="#4a5568">
                    • 24h timelock on ownership changes
                </text>
                <text x="780" y="800" font-size="10" fill="#4a5568">
                    • Non-upgradable Safe implementation
                </text>
                <text x="780" y="820" font-size="10" fill="#4a5568">
                    • Permissioned transaction execution
                </text>
                <text x="780" y="840" font-size="10" fill="#4a5568">
                    • Independent simulation by each owner
                </text>
                
                <text x="1050" y="780" font-size="10" fill="#4a5568">
                    • Hypernative Guardian monitoring
                </text>
                <text x="1050" y="800" font-size="10" fill="#4a5568">
                    • Malicious payload detection
                </text>
                <text x="1050" y="820" font-size="10" fill="#4a5568">
                    • Custom security policies
                </text>
                <text x="1050" y="840" font-size="10" fill="#4a5568">
                    • Pre-execution blocking
                </text>
                
                <!-- Summary -->
                <rect x="50" y="1230" width="1300" height="100" rx="10" fill="#edf2f7" stroke="#718096" stroke-width="3"/>
                <text x="700" y="1260" font-size="16" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    🎯 Governance Principles
                </text>
                <text x="700" y="1285" font-size="12" text-anchor="middle" fill="#4a5568">
                    <tspan font-weight="bold">Trust Minimization:</tspan> Multiple layers of oversight • Timelocks on critical changes • Veto powers
                </text>
                <text x="700" y="1305" font-size="12" text-anchor="middle" fill="#4a5568">
                    <tspan font-weight="bold">Operator Constraints:</tspan> Pre-approved instructions • Loss caps • Cooldowns • Continuous monitoring
                </text>
                <text x="700" y="1325" font-size="12" text-anchor="middle" fill="#4a5568">
                    <tspan font-weight="bold">Emergency Response:</tspan> Security Council can activate Recovery Mode • Protect user funds • Revoke malicious actors
                </text>
                
                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrowg1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#2d3748"/>
                    </marker>
                    <marker id="arrowg2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#e53e3e"/>
                    </marker>
                    <marker id="arrowg3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#48bb78"/>
                    </marker>
                </defs>
            </svg>
            
            <div class="legend">
                <h3>Governance Key Concepts</h3>
                <div class="legend-item">
                    <span class="legend-box" style="background: #4299e1;"></span>
                    <span>Normal Flow</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #f39c12;"></span>
                    <span>Timelock Period</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #e53e3e;"></span>
                    <span>Emergency/Veto</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #48bb78;"></span>
                    <span>Approved Action</span>
                </div>
            </div>
        </div><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Makina Protocol Diagrams</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 30px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .tab:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .tab.active {
            background: white;
            color: #667eea;
        }
        
        .diagram-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: none;
        }
        
        .diagram-container.active {
            display: block;
        }
        
        svg {
            width: 100%;
            height: auto;
        }
        
        .legend {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .legend h3 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .legend-item {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 8px;
        }
        
        .legend-box {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 5px;
            vertical-align: middle;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🏗️ Makina Protocol Diagrams</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="showDiagram('architecture')">System Architecture</button>
            <button class="tab" onclick="showDiagram('deposit')">Deposit Flow</button>
            <button class="tab" onclick="showDiagram('redemption')">Redemption Flow</button>
            <button class="tab" onclick="showDiagram('crosschain')">Cross-Chain Operations</button>
            <button class="tab" onclick="showDiagram('userjourney')">User Journey</button>
            <button class="tab" onclick="showDiagram('governance')">Governance Flow</button>
        </div>
        
        <!-- Architecture Diagram -->
        <div id="architecture" class="diagram-container active">
            <svg viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg">
                <!-- Background -->
                <rect width="1200" height="900" fill="#f8f9fc"/>
                
                <!-- Title -->
                <text x="600" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Makina Protocol Architecture
                </text>
                
                <!-- Hub Chain (Ethereum) -->
                <rect x="50" y="70" width="500" height="420" rx="10" fill="#e6f3ff" stroke="#3182ce" stroke-width="3"/>
                <text x="300" y="95" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c5282">
                    Hub Chain (Ethereum Mainnet)
                </text>
                
                <!-- Machine -->
                <rect x="80" y="120" width="440" height="200" rx="8" fill="#fff" stroke="#4299e1" stroke-width="2"/>
                <text x="300" y="145" font-size="16" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Machine (Vault)
                </text>
                
                <!-- Machine Components -->
                <rect x="100" y="160" width="120" height="50" rx="5" fill="#4299e1" stroke="#2c5282" stroke-width="1"/>
                <text x="160" y="190" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Depositor</text>
                
                <rect x="240" y="160" width="120" height="50" rx="5" fill="#4299e1" stroke="#2c5282" stroke-width="1"/>
                <text x="300" y="185" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Redeemer/</text>
                <text x="300" y="200" font-size="12" font-weight="bold" text-anchor="middle" fill="white">AsyncRedeemer</text>
                
                <rect x="380" y="160" width="120" height="50" rx="5" fill="#4299e1" stroke="#2c5282" stroke-width="1"/>
                <text x="440" y="190" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Fee Manager</text>
                
                <!-- Machine Token -->
                <rect x="100" y="230" width="180" height="50" rx="5" fill="#805ad5" stroke="#553c9a" stroke-width="1"/>
                <text x="190" y="255" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Machine Token (ERC20)</text>
                <text x="190" y="270" font-size="10" text-anchor="middle" fill="white">+ Wormhole NTT</text>
                
                <!-- Security Module -->
                <rect x="300" y="230" width="200" height="50" rx="5" fill="#ed8936" stroke="#c05621" stroke-width="1"/>
                <text x="400" y="255" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Security Module</text>
                <text x="400" y="270" font-size="10" text-anchor="middle" fill="white">(Insurance Pool)</text>
                
                <!-- Hub Caliber -->
                <rect x="80" y="340" width="440" height="130" rx="8" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="300" y="365" font-size="16" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Hub Caliber
                </text>
                
                <rect x="100" y="380" width="130" height="60" rx="5" fill="#48bb78" stroke="#2f855a" stroke-width="1"/>
                <text x="165" y="405" font-size="11" font-weight="bold" text-anchor="middle" fill="white">MakinaVM</text>
                <text x="165" y="420" font-size="9" text-anchor="middle" fill="white">(Enso Weiroll)</text>
                
                <rect x="250" y="380" width="120" height="60" rx="5" fill="#48bb78" stroke="#2f855a" stroke-width="1"/>
                <text x="310" y="405" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Positions</text>
                <text x="310" y="420" font-size="9" text-anchor="middle" fill="white">+ Base Tokens</text>
                
                <rect x="390" y="380" width="110" height="60" rx="5" fill="#48bb78" stroke="#2f855a" stroke-width="1"/>
                <text x="445" y="410" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Accounting</text>
                
                <!-- Spoke Chains -->
                <rect x="650" y="70" width="500" height="200" rx="10" fill="#fef5e7" stroke="#f39c12" stroke-width="3"/>
                <text x="900" y="95" font-size="18" font-weight="bold" text-anchor="middle" fill="#d68910">
                    Spoke Chain 1 (L2/Solana)
                </text>
                
                <rect x="680" y="120" width="440" height="130" rx="8" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="900" y="145" font-size="16" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Spoke Caliber
                </text>
                
                <rect x="700" y="160" width="130" height="60" rx="5" fill="#48bb78" stroke="#2f855a" stroke-width="1"/>
                <text x="765" y="185" font-size="11" font-weight="bold" text-anchor="middle" fill="white">MakinaVM</text>
                <text x="765" y="200" font-size="9" text-anchor="middle" fill="white">(Instructions)</text>
                
                <rect x="850" y="160" width="120" height="60" rx="5" fill="#48bb78" stroke="#2f855a" stroke-width="1"/>
                <text x="910" y="185" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Positions</text>
                <text x="910" y="200" font-size="9" text-anchor="middle" fill="white">+ Base Tokens</text>
                
                <rect x="990" y="160" width="110" height="60" rx="5" fill="#e53e3e" stroke="#c53030" stroke-width="1"/>
                <text x="1045" y="185" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Mailbox</text>
                <text x="1045" y="200" font-size="9" text-anchor="middle" fill="white">(Bridge)</text>
                
                <!-- Another Spoke Chain -->
                <rect x="650" y="290" width="500" height="200" rx="10" fill="#fef5e7" stroke="#f39c12" stroke-width="3"/>
                <text x="900" y="315" font-size="18" font-weight="bold" text-anchor="middle" fill="#d68910">
                    Spoke Chain 2 (Arbitrum/Base)
                </text>
                
                <rect x="680" y="340" width="440" height="130" rx="8" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="900" y="365" font-size="16" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Spoke Caliber
                </text>
                
                <rect x="700" y="380" width="130" height="60" rx="5" fill="#48bb78" stroke="#2f855a" stroke-width="1"/>
                <text x="765" y="410" font-size="11" font-weight="bold" text-anchor="middle" fill="white">MakinaVM</text>
                
                <rect x="850" y="380" width="120" height="60" rx="5" fill="#48bb78" stroke="#2f855a" stroke-width="1"/>
                <text x="910" y="410" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Positions</text>
                
                <rect x="990" y="380" width="110" height="60" rx="5" fill="#e53e3e" stroke="#c53030" stroke-width="1"/>
                <text x="1045" y="410" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Mailbox</text>
                
                <!-- Infrastructure Layer -->
                <rect x="50" y="520" width="1100" height="160" rx="10" fill="#edf2f7" stroke="#718096" stroke-width="2"/>
                <text x="600" y="545" font-size="18" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Infrastructure &amp; Services
                </text>
                
                <rect x="80" y="560" width="200" height="90" rx="5" fill="#fff" stroke="#718096" stroke-width="1"/>
                <text x="180" y="585" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Oracle Registry</text>
                <text x="180" y="605" font-size="10" text-anchor="middle" fill="#4a5568">(Chainlink Feeds)</text>
                <text x="180" y="625" font-size="9" text-anchor="middle" fill="#718096">Price Data</text>
                
                <rect x="310" y="560" width="200" height="90" rx="5" fill="#fff" stroke="#718096" stroke-width="1"/>
                <text x="410" y="585" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Wormhole CCQ</text>
                <text x="410" y="605" font-size="10" text-anchor="middle" fill="#4a5568">(Cross-Chain Queries)</text>
                <text x="410" y="625" font-size="9" text-anchor="middle" fill="#718096">AUM Aggregation</text>
                
                <rect x="540" y="560" width="200" height="90" rx="5" fill="#fff" stroke="#718096" stroke-width="1"/>
                <text x="640" y="585" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Bridge Adapters</text>
                <text x="640" y="605" font-size="10" text-anchor="middle" fill="#4a5568">(Multi-Bridge Support)</text>
                <text x="640" y="625" font-size="9" text-anchor="middle" fill="#718096">Asset Transfer</text>
                
                <rect x="770" y="560" width="200" height="90" rx="5" fill="#fff" stroke="#718096" stroke-width="1"/>
                <text x="870" y="585" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Wormhole NTT</text>
                <text x="870" y="605" font-size="10" text-anchor="middle" fill="#4a5568">(Token Transfer)</text>
                <text x="870" y="625" font-size="9" text-anchor="middle" fill="#718096">Machine Token Bridge</text>
                
                <rect x="1000" y="560" width="130" height="90" rx="5" fill="#fff" stroke="#718096" stroke-width="1"/>
                <text x="1065" y="585" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">DeFi</text>
                <text x="1065" y="600" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Protocols</text>
                <text x="1065" y="620" font-size="9" text-anchor="middle" fill="#718096">Aave, Uniswap</text>
                <text x="1065" y="635" font-size="9" text-anchor="middle" fill="#718096">Compound, etc.</text>
                
                <!-- Governance Layer -->
                <rect x="50" y="710" width="1100" height="160" rx="10" fill="#ffe6e6" stroke="#e53e3e" stroke-width="2"/>
                <text x="600" y="735" font-size="18" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Governance &amp; Control
                </text>
                
                <rect x="100" y="755" width="180" height="85" rx="5" fill="#fff" stroke="#e53e3e" stroke-width="1"/>
                <text x="190" y="780" font-size="13" font-weight="bold" text-anchor="middle" fill="#c53030">Operator</text>
                <text x="190" y="800" font-size="9" text-anchor="middle" fill="#718096">Daily Operations</text>
                <text x="190" y="815" font-size="9" text-anchor="middle" fill="#718096">Position Management</text>
                
                <rect x="310" y="755" width="180" height="85" rx="5" fill="#fff" stroke="#e53e3e" stroke-width="1"/>
                <text x="400" y="780" font-size="13" font-weight="bold" text-anchor="middle" fill="#c53030">Risk Manager</text>
                <text x="400" y="800" font-size="9" text-anchor="middle" fill="#718096">Risk Parameters</text>
                <text x="400" y="815" font-size="9" text-anchor="middle" fill="#718096">Merkle Root Updates</text>
                
                <rect x="520" y="755" width="180" height="85" rx="5" fill="#fff" stroke="#e53e3e" stroke-width="1"/>
                <text x="610" y="780" font-size="13" font-weight="bold" text-anchor="middle" fill="#c53030">Security Council</text>
                <text x="610" y="800" font-size="9" text-anchor="middle" fill="#718096">Veto Power</text>
                <text x="610" y="815" font-size="9" text-anchor="middle" fill="#718096">Recovery Mode</text>
                
                <rect x="730" y="755" width="180" height="85" rx="5" fill="#fff" stroke="#e53e3e" stroke-width="1"/>
                <text x="820" y="780" font-size="13" font-weight="bold" text-anchor="middle" fill="#c53030">Root Guardians</text>
                <text x="820" y="800" font-size="9" text-anchor="middle" fill="#718096">Merkle Root Veto</text>
                <text x="820" y="815" font-size="9" text-anchor="middle" fill="#718096">Instruction Control</text>
                
                <rect x="940" y="755" width="180" height="85" rx="5" fill="#fff" stroke="#e53e3e" stroke-width="1"/>
                <text x="1030" y="780" font-size="13" font-weight="bold" text-anchor="middle" fill="#c53030">Makina DAO</text>
                <text x="1030" y="800" font-size="9" text-anchor="middle" fill="#718096">Protocol Governance</text>
                <text x="1030" y="815" font-size="9" text-anchor="middle" fill="#718096">Fee Distribution</text>
                
                <!-- Connection Lines -->
                <!-- Hub to Spoke 1 -->
                <line x1="550" y1="190" x2="680" y2="190" stroke="#f39c12" stroke-width="3" stroke-dasharray="5,5"/>
                <text x="615" y="185" font-size="11" fill="#d68910">Bridge</text>
                
                <!-- Hub to Spoke 2 -->
                <line x1="550" y1="410" x2="680" y2="410" stroke="#f39c12" stroke-width="3" stroke-dasharray="5,5"/>
                <text x="615" y="405" font-size="11" fill="#d68910">Bridge</text>
                
                <!-- Wormhole CCQ connections -->
                <line x1="410" y1="560" x2="300" y2="470" stroke="#4299e1" stroke-width="2" stroke-dasharray="3,3"/>
                <line x1="410" y1="560" x2="900" y2="250" stroke="#4299e1" stroke-width="2" stroke-dasharray="3,3"/>
                <line x1="410" y1="560" x2="900" y2="470" stroke="#4299e1" stroke-width="2" stroke-dasharray="3,3"/>
                
                <!-- User interaction -->
                <ellipse cx="300" cy="30" rx="40" ry="20" fill="#805ad5" stroke="#553c9a" stroke-width="2"/>
                <text x="300" y="35" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Users</text>
                <line x1="300" y1="50" x2="300" y2="120" stroke="#805ad5" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Arrow marker -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#805ad5"/>
                    </marker>
                </defs>
            </svg>
            
            <div class="legend">
                <h3>Legend</h3>
                <div class="legend-item">
                    <span class="legend-box" style="background: #4299e1;"></span>
                    <span>Machine (Hub Vault)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #48bb78;"></span>
                    <span>Caliber (Execution Engine)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #ed8936;"></span>
                    <span>Security Module</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #e53e3e;"></span>
                    <span>Governance/Control</span>
                </div>
            </div>
        </div>
        
        <!-- Deposit Flow Diagram -->
        <div id="deposit" class="diagram-container">
            <svg viewBox="0 0 1000 800" xmlns="http://www.w3.org/2000/svg">
                <rect width="1000" height="800" fill="#f8f9fc"/>
                
                <text x="500" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Deposit Flow
                </text>
                
                <!-- User -->
                <ellipse cx="100" cy="100" rx="60" ry="30" fill="#805ad5" stroke="#553c9a" stroke-width="2"/>
                <text x="100" y="105" font-size="14" font-weight="bold" text-anchor="middle" fill="white">User</text>
                
                <!-- Step 1: Deposit -->
                <rect x="250" y="70" width="200" height="60" rx="8" fill="#4299e1" stroke="#2c5282" stroke-width="2"/>
                <text x="350" y="95" font-size="14" font-weight="bold" text-anchor="middle" fill="white">1. Deposit</text>
                <text x="350" y="115" font-size="11" text-anchor="middle" fill="white">Accounting Token</text>
                
                <line x1="160" y1="100" x2="250" y2="100" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow1)"/>
                <text x="205" y="90" font-size="10" fill="#2d3748">Tokens</text>
                
                <!-- Step 2: Minting -->
                <rect x="250" y="170" width="200" height="60" rx="8" fill="#48bb78" stroke="#2f855a" stroke-width="2"/>
                <text x="350" y="195" font-size="14" font-weight="bold" text-anchor="middle" fill="white">2. Mint Shares</text>
                <text x="350" y="215" font-size="11" text-anchor="middle" fill="white">Machine Token</text>
                
                <line x1="350" y1="130" x2="350" y2="170" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow1)"/>
                
                <!-- Step 3: Share Price Calculation -->
                <rect x="250" y="270" width="200" height="80" rx="8" fill="#f6ad55" stroke="#c05621" stroke-width="2"/>
                <text x="350" y="295" font-size="14" font-weight="bold" text-anchor="middle" fill="white">3. Calculate</text>
                <text x="350" y="315" font-size="11" text-anchor="middle" fill="white">SharePrice = AUM / Supply</text>
                <text x="350" y="335" font-size="10" text-anchor="middle" fill="white">Shares = Deposit / SharePrice</text>
                
                <line x1="350" y1="230" x2="350" y2="270" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow1)"/>
                
                <!-- Step 4: Return Shares -->
                <rect x="250" y="390" width="200" height="60" rx="8" fill="#805ad5" stroke="#553c9a" stroke-width="2"/>
                <text x="350" y="415" font-size="14" font-weight="bold" text-anchor="middle" fill="white">4. Receive Shares</text>
                <text x="350" y="435" font-size="11" text-anchor="middle" fill="white">Machine Token</text>
                
                <line x1="350" y1="350" x2="350" y2="390" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow1)"/>
                
                <line x1="250" y1="420" x2="160" y2="130" stroke="#805ad5" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow2)"/>
                <text x="180" y="280" font-size="10" fill="#805ad5">Shares</text>
                
                <!-- Parallel Process: Capital Deployment -->
                <rect x="550" y="70" width="400" height="500" rx="10" fill="#edf2f7" stroke="#718096" stroke-width="2"/>
                <text x="750" y="100" font-size="16" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Capital Deployment (Operator)
                </text>
                
                <!-- Operator Actions -->
                <rect x="580" y="130" width="340" height="60" rx="8" fill="#e53e3e" stroke="#c53030" stroke-width="2"/>
                <text x="750" y="160" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Operator Identifies Opportunity</text>
                
                <rect x="580" y="210" width="340" height="60" rx="8" fill="#48bb78" stroke="#2f855a" stroke-width="2"/>
                <text x="750" y="235" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Deploy to Caliber Positions</text>
                <text x="750" y="255" font-size="10" text-anchor="middle" fill="white">(Lending, LP, Staking)</text>
                
                <rect x="580" y="290" width="340" height="60" rx="8" fill="#f6ad55" stroke="#c05621" stroke-width="2"/>
                <text x="750" y="315" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Cross-Chain Bridge</text>
                <text x="750" y="335" font-size="10" text-anchor="middle" fill="white">(If needed to Spoke Chain)</text>
                
                <rect x="580" y="370" width="340" height="60" rx="8" fill="#4299e1" stroke="#2c5282" stroke-width="2"/>
                <text x="750" y="395" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Execute MakinaVM Instructions</text>
                <text x="750" y="415" font-size="10" text-anchor="middle" fill="white">(Open Positions)</text>
                
                <rect x="580" y="450" width="340" height="60" rx="8" fill="#805ad5" stroke="#553c9a" stroke-width="2"/>
                <text x="750" y="475" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Update Accounting</text>
                <text x="750" y="495" font-size="10" text-anchor="middle" fill="white">(AUM Increases)</text>
                
                <!-- Vertical flow arrows -->
                <line x1="750" y1="190" x2="750" y2="210" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow1)"/>
                <line x1="750" y1="270" x2="750" y2="290" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow1)"/>
                <line x1="750" y1="350" x2="750" y2="370" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow1)"/>
                <line x1="750" y1="430" x2="750" y2="450" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow1)"/>
                
                <!-- Connection from deposit to operator -->
                <line x1="450" y1="100" x2="580" y2="160" stroke="#4299e1" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow1)"/>
                <text x="515" y="120" font-size="10" fill="#4299e1">Idle Funds</text>
                
                <!-- AUM Impact -->
                <rect x="580" y="600" width="340" height="80" rx="8" fill="#fef5e7" stroke="#f39c12" stroke-width="2"/>
                <text x="750" y="625" font-size="14" font-weight="bold" text-anchor="middle" fill="#d68910">Result</text>
                <text x="750" y="645" font-size="11" text-anchor="middle" fill="#2d3748">✓ AUM Increases</text>
                <text x="750" y="665" font-size="11" text-anchor="middle" fill="#2d3748">✓ Share Price Grows with Yield</text>
                
                <line x1="750" y1="510" x2="750" y2="600" stroke="#f39c12" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow3)"/>
                
                <!-- Info Box -->
                <rect x="50" y="600" width="400" height="150" rx="8" fill="#e6fffa" stroke="#319795" stroke-width="2"/>
                <text x="250" y="625" font-size="14" font-weight="bold" text-anchor="middle" fill="#234e52">
                    Key Points
                </text>
                <text x="70" y="655" font-size="11" fill="#2d3748">• Users deposit Accounting Token (e.g., USDC)</text>
                <text x="70" y="675" font-size="11" fill="#2d3748">• Machine mints shares based on current share price</text>
                <text x="70" y="695" font-size="11" fill="#2d3748">• Operator deploys capital to generate yield</text>
                <text x="70" y="715" font-size="11" fill="#2d3748">• Cross-chain deployment via Caliber Mailboxes</text>
                <text x="70" y="735" font-size="11" fill="#2d3748">• Share price increases as AUM grows</text>
                
                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#2d3748"/>
                    </marker>
                    <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#805ad5"/>
                    </marker>
                    <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#f39c12"/>
                    </marker>
                </defs>
            </svg>
        </div>
        
        <!-- Redemption Flow Diagram -->
        <div id="redemption" class="diagram-container">
            <svg viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg">
                <rect width="1200" height="900" fill="#f8f9fc"/>
                
                <text x="600" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Redemption Flow (AsyncRedeemer)
                </text>
                
                <!-- User -->
                <ellipse cx="100" cy="100" rx="60" ry="30" fill="#805ad5" stroke="#553c9a" stroke-width="2"/>
                <text x="100" y="105" font-size="14" font-weight="bold" text-anchor="middle" fill="white">User</text>
                
                <!-- Phase 1: Request -->
                <rect x="50" y="160" width="500" height="200" rx="10" fill="#fff4e6" stroke="#f39c12" stroke-width="3"/>
                <text x="300" y="185" font-size="16" font-weight="bold" text-anchor="middle" fill="#d68910">
                    Phase 1: Request Redemption
                </text>
                
                <rect x="80" y="210" width="180" height="60" rx="8" fill="#4299e1" stroke="#2c5282" stroke-width="2"/>
                <text x="170" y="235" font-size="13" font-weight="bold" text-anchor="middle" fill="white">1. Request</text>
                <text x="170" y="255" font-size="10" text-anchor="middle" fill="white">Lock Machine Tokens</text>
                
                <rect x="290" y="210" width="180" height="60" rx="8" fill="#48bb78" stroke="#2f855a" stroke-width="2"/>
                <text x="380" y="235" font-size="13" font-weight="bold" text-anchor="middle" fill="white">2. Receive NFT</text>
                <text x="380" y="255" font-size="10" text-anchor="middle" fill="white">ERC-721 Request Token</text>
                
                <line x1="100" y1="130" x2="170" y2="210" stroke="#805ad5" stroke-width="2" marker-end="url(#arrow4)"/>
                <line x1="260" y1="240" x2="290" y2="240" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow4)"/>
                
                <rect x="80" y="290" width="390" height="50" rx="8" fill="#fef5e7" stroke="#f39c12" stroke-width="1"/>
                <text x="275" y="320" font-size="11" text-anchor="middle" fill="#2d3748">
                    Shares locked in queue • FIFO order • User holds NFT receipt
                </text>
                
                <!-- Phase 2: Settlement -->
                <rect x="50" y="400" width="500" height="280" rx="10" fill="#e6f3ff" stroke="#3182ce" stroke-width="3"/>
                <text x="300" y="425" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c5282">
                    Phase 2: Settlement (Operator)
                </text>
                
                <rect x="80" y="450" width="180" height="70" rx="8" fill="#e53e3e" stroke="#c53030" stroke-width="2"/>
                <text x="170" y="475" font-size="13" font-weight="bold" text-anchor="middle" fill="white">3. Close Positions</text>
                <text x="170" y="495" font-size="10" text-anchor="middle" fill="white">Liquidate Assets</text>
                <text x="170" y="510" font-size="10" text-anchor="middle" fill="white">Bridge Back to Hub</text>
                
                <rect x="290" y="450" width="180" height="70" rx="8" fill="#48bb78" stroke="#2f855a" stroke-width="2"/>
                <text x="380" y="475" font-size="13" font-weight="bold" text-anchor="middle" fill="white">4. Settle Queue</text>
                <text x="380" y="495" font-size="10" text-anchor="middle" fill="white">Transfer Shares to</text>
                <text x="380" y="510" font-size="10" text-anchor="middle" fill="white">Machine & Burn</text>
                
                <line x1="260" y1="485" x2="290" y2="485" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow4)"/>
                
                <rect x="80" y="545" width="390" height="70" rx="8" fill="#f6ad55" stroke="#c05621" stroke-width="2"/>
                <text x="275" y="570" font-size="13" font-weight="bold" text-anchor="middle" fill="white">5. Queue → Machine</text>
                <text x="275" y="590" font-size="10" text-anchor="middle" fill="white">Machine burns shares & sends Accounting Tokens</text>
                <text x="275" y="605" font-size="10" text-anchor="middle" fill="white">to Queue at current share price</text>
                
                <line x1="380" y1="520" x2="380" y2="545" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow4)"/>
                
                <rect x="80" y="635" width="390" height="30" rx="5" fill="#fef5e7" stroke="#f39c12" stroke-width="1"/>
                <text x="275" y="655" font-size="11" text-anchor="middle" fill="#2d3748">
                    Accounting Tokens now available in Queue contract
                </text>
                
                <!-- Phase 3: Claim -->
                <rect x="50" y="720" width="500" height="140" rx="10" fill="#e6fffa" stroke="#319795" stroke-width="3"/>
                <text x="300" y="745" font-size="16" font-weight="bold" text-anchor="middle" fill="#234e52">
                    Phase 3: Claim (User)
                </text>
                
                <rect x="80" y="770" width="180" height="60" rx="8" fill="#805ad5" stroke="#553c9a" stroke-width="2"/>
                <text x="170" y="795" font-size="13" font-weight="bold" text-anchor="middle" fill="white">6. Burn NFT</text>
                <text x="170" y="815" font-size="10" text-anchor="middle" fill="white">Redeem Request Token</text>
                
                <rect x="290" y="770" width="180" height="60" rx="8" fill="#48bb78" stroke="#2f855a" stroke-width="2"/>
                <text x="380" y="795" font-size="13" font-weight="bold" text-anchor="middle" fill="white">7. Receive Funds</text>
                <text x="380" y="815" font-size="10" text-anchor="middle" fill="white">Accounting Token</text>
                
                <line x1="100" y1="680" x2="170" y2="770" stroke="#805ad5" stroke-width="2" marker-end="url(#arrow4)"/>
                <line x1="260" y1="800" x2="290" y2="800" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow4)"/>
                <line x1="470" y1="800" x2="550" y2="130" stroke="#48bb78" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow5)"/>
                <text x="520" y="450" font-size="10" fill="#48bb78" transform="rotate(-70 520 450)">Tokens</text>
                
                <!-- Right Side: Timeline & Info -->
                <rect x="650" y="160" width="500" height="700" rx="10" fill="#edf2f7" stroke="#718096" stroke-width="2"/>
                <text x="900" y="190" font-size="18" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Process Details
                </text>
                
                <!-- Timeline -->
                <rect x="680" y="220" width="440" height="280" rx="8" fill="#fff" stroke="#4299e1" stroke-width="2"/>
                <text x="900" y="245" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c5282">
                    Timeline &amp; Waiting Periods
                </text>
                
                <circle cx="710" cy="280" r="8" fill="#4299e1"/>
                <text x="730" y="285" font-size="12" fill="#2d3748">
                    <tspan font-weight="bold">T0:</tspan> User requests redemption
                </text>
                
                <line x1="710" y1="288" x2="710" y2="315" stroke="#cbd5e0" stroke-width="2"/>
                
                <circle cx="710" cy="323" r="8" fill="#f6ad55"/>
                <text x="730" y="328" font-size="12" fill="#2d3748">
                    <tspan font-weight="bold">T1:</tspan> Waiting for operator settlement
                </text>
                <text x="730" y="345" font-size="10" fill="#718096">
                    (Variable time - depends on liquidity)
                </text>
                
                <line x1="710" y1="331" x2="710" y2="370" stroke="#cbd5e0" stroke-width="2"/>
                
                <circle cx="710" cy="378" r="8" fill="#48bb78"/>
                <text x="730" y="383" font-size="12" fill="#2d3748">
                    <tspan font-weight="bold">T2:</tspan> Queue settled by operator
                </text>
                
                <line x1="710" y1="386" x2="710" y2="415" stroke="#cbd5e0" stroke-width="2"/>
                
                <circle cx="710" cy="423" r="8" fill="#805ad5"/>
                <text x="730" y="428" font-size="12" fill="#2d3748">
                    <tspan font-weight="bold">T3:</tspan> User can claim (unlimited time)
                </text>
                
                <rect x="700" y="455" width="390" height="30" rx="5" fill="#fef5e7" stroke="#f39c12" stroke-width="1"/>
                <text x="895" y="475" font-size="11" text-anchor="middle" fill="#2d3748">
                    ⚡ No time limit for claiming after settlement
                </text>
                
                <!-- Why Async -->
                <rect x="680" y="520" width="440" height="140" rx="8" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
                <text x="900" y="545" font-size="14" font-weight="bold" text-anchor="middle" fill="#c53030">
                    Why AsyncRedeemer?
                </text>
                
                <text x="700" y="575" font-size="11" fill="#2d3748">
                    ❌ Assets deployed in DeFi positions aren't instantly liquid
                </text>
                <text x="700" y="595" font-size="11" fill="#2d3748">
                    ❌ Cross-chain bridging takes time (hours to days)
                </text>
                <text x="700" y="615" font-size="11" fill="#2d3748">
                    ✓ FIFO queue ensures fairness
                </text>
                <text x="700" y="635" font-size="11" fill="#2d3748">
                    ✓ NFT receipt allows transfer of redemption rights
                </text>
                
                <!-- Key Features -->
                <rect x="680" y="680" width="440" height="160" rx="8" fill="#fff" stroke="#48bb78" stroke-width="2"/>
                <text x="900" y="705" font-size="14" font-weight="bold" text-anchor="middle" fill="#2f855a">
                    Key Features
                </text>
                
                <text x="700" y="735" font-size="11" fill="#2d3748">
                    <tspan font-weight="bold">• FIFO Settlement:</tspan> First requests settled first
                </text>
                <text x="700" y="755" font-size="11" fill="#2d3748">
                    <tspan font-weight="bold">• NFT Receipt:</tspan> ERC-721 token proves request
                </text>
                <text x="700" y="775" font-size="11" fill="#2d3748">
                    <tspan font-weight="bold">• No Claim Deadline:</tspan> Unlimited time after settlement
                </text>
                <text x="700" y="795" font-size="11" fill="#2d3748">
                    <tspan font-weight="bold">• Current Price:</tspan> Settled at share price at settlement time
                </text>
                <text x="700" y="815" font-size="11" fill="#2d3748">
                    <tspan font-weight="bold">• Operator Controlled:</tspan> Settlement timing depends on liquidity
                </text>
                
                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrow4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#2d3748"/>
                    </marker>
                    <marker id="arrow5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#48bb78"/>
                    </marker>
                </defs>
            </svg>
        </div>
        
        <!-- Cross-Chain Operations Diagram -->
        <div id="crosschain" class="diagram-container">
            <svg viewBox="0 0 1200 1000" xmlns="http://www.w3.org/2000/svg">
                <rect width="1200" height="1000" fill="#f8f9fc"/>
                
                <text x="600" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Cross-Chain Operations Flow
                </text>
                
                <!-- Hub Chain -->
                <rect x="50" y="80" width="450" height="400" rx="10" fill="#e6f3ff" stroke="#3182ce" stroke-width="3"/>
                <text x="275" y="110" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c5282">
                    Hub Chain (Ethereum)
                </text>
                
                <!-- Machine -->
                <rect x="80" y="140" width="180" height="100" rx="8" fill="#4299e1" stroke="#2c5282" stroke-width="2"/>
                <text x="170" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Machine</text>
                <text x="170" y="185" font-size="11" text-anchor="middle" fill="white">Total AUM</text>
                <text x="170" y="205" font-size="11" text-anchor="middle" fill="white">Share Price</text>
                <text x="170" y="225" font-size="11" text-anchor="middle" fill="white">User Interface</text>
                
                <!-- Hub Caliber -->
                <rect x="80" y="260" width="180" height="100" rx="8" fill="#48bb78" stroke="#2f855a" stroke-width="2"/>
                <text x="170" y="285" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Hub Caliber</text>
                <text x="170" y="305" font-size="11" text-anchor="middle" fill="white">Local Positions</text>
                <text x="170" y="325" font-size="11" text-anchor="middle" fill="white">Base Tokens</text>
                <text x="170" y="345" font-size="11" text-anchor="middle" fill="white">MakinaVM</text>
                
                <line x1="170" y1="240" x2="170" y2="260" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow6)"/>
                
                <!-- Hub Mailbox -->
                <rect x="290" y="260" width="180" height="100" rx="8" fill="#e53e3e" stroke="#c53030" stroke-width="2"/>
                <text x="380" y="285" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Caliber Mailbox</text>
                <text x="380" y="305" font-size="11" text-anchor="middle" fill="white">Bridge Adapters</text>
                <text x="380" y="325" font-size="11" text-anchor="middle" fill="white">Access Control</text>
                <text x="380" y="345" font-size="11" text-anchor="middle" fill="white">Accounting Data</text>
                
                <line x1="260" y1="310" x2="290" y2="310" stroke="#2d3748" stroke-width="2" stroke-dasharray="3,3"/>
                
                <!-- Bridging Steps Hub Side -->
                <rect x="80" y="390" width="390" height="70" rx="8" fill="#fef5e7" stroke="#f39c12" stroke-width="2"/>
                <text x="275" y="415" font-size="13" font-weight="bold" text-anchor="middle" fill="#d68910">
                    Outbound Bridge Steps (Hub → Spoke)
                </text>
                <text x="275" y="435" font-size="10" text-anchor="middle" fill="#2d3748">
                    1. Schedule transfer → 2. Authorize on recipient
                </text>
                <text x="275" y="450" font-size="10" text-anchor="middle" fill="#2d3748">
                    3. Send via bridge → 4. Claim on destination
                </text>
                
                <!-- Spoke Chain 1 -->
                <rect x="700" y="80" width="450" height="400" rx="10" fill="#fef5e7" stroke="#f39c12" stroke-width="3"/>
                <text x="925" y="110" font-size="18" font-weight="bold" text-anchor="middle" fill="#d68910">
                    Spoke Chain (Arbitrum/Base/Solana)
                </text>
                
                <!-- Spoke Mailbox -->
                <rect x="730" y="140" width="180" height="100" rx="8" fill="#e53e3e" stroke="#c53030" stroke-width="2"/>
                <text x="820" y="165" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Caliber Mailbox</text>
                <text x="820" y="185" font-size="11" text-anchor="middle" fill="white">Bridge Receiver</text>
                <text x="820" y="205" font-size="11" text-anchor="middle" fill="white">Access Control</text>
                <text x="820" y="225" font-size="11" text-anchor="middle" fill="white">CCQ Interface</text>
                
                <!-- Spoke Caliber -->
                <rect x="730" y="260" width="180" height="100" rx="8" fill="#48bb78" stroke="#2f855a" stroke-width="2"/>
                <text x="820" y="285" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Spoke Caliber</text>
                <text x="820" y="305" font-size="11" text-anchor="middle" fill="white">Positions</text>
                <text x="820" y="325" font-size="11" text-anchor="middle" fill="white">Base Tokens</text>
                <text x="820" y="345" font-size="11" text-anchor="middle" fill="white">MakinaVM</text>
                
                <line x1="820" y1="240" x2="820" y2="260" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow6)"/>
                
                <!-- DeFi Protocols -->
                <rect x="940" y="260" width="180" height="100" rx="8" fill="#805ad5" stroke="#553c9a" stroke-width="2"/>
                <text x="1030" y="285" font-size="14" font-weight="bold" text-anchor="middle" fill="white">DeFi Protocols</text>
                <text x="1030" y="305" font-size="11" text-anchor="middle" fill="white">Aave</text>
                <text x="1030" y="325" font-size="11" text-anchor="middle" fill="white">Uniswap</text>
                <text x="1030" y="345" font-size="11" text-anchor="middle" fill="white">Compound</text>
                
                <line x1="910" y1="310" x2="940" y2="310" stroke="#805ad5" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrow7)"/>
                <text x="925" y="300" font-size="9" fill="#805ad5">Deploy</text>
                
                <!-- Inbound Steps -->
                <rect x="730" y="390" width="390" height="70" rx="8" fill="#e6fffa" stroke="#319795" stroke-width="2"/>
                <text x="925" y="415" font-size="13" font-weight="bold" text-anchor="middle" fill="#234e52">
                    Inbound Bridge Steps (Spoke → Hub)
                </text>
                <text x="925" y="435" font-size="10" text-anchor="middle" fill="#2d3748">
                    1. Schedule transfer → 2. Authorize on Hub
                </text>
                <text x="925" y="450" font-size="10" text-anchor="middle" fill="#2d3748">
                    3. Send via bridge → 4. Claim on Hub
                </text>
                
                <!-- Bridge Connection -->
                <g>
                    <!-- Forward arrow -->
                    <path d="M 500 300 Q 600 200 700 300" fill="none" stroke="#f39c12" stroke-width="4" marker-end="url(#arrow8)"/>
                    <text x="600" y="240" font-size="12" font-weight="bold" text-anchor="middle" fill="#d68910">
                        Bridge Outbound
                    </text>
                    <text x="600" y="255" font-size="10" text-anchor="middle" fill="#2d3748">
                        (Tokens to Spoke)
                    </text>
                    
                    <!-- Return arrow -->
                    <path d="M 700 350 Q 600 450 500 350" fill="none" stroke="#319795" stroke-width="4" marker-end="url(#arrow9)"/>
                    <text x="600" y="430" font-size="12" font-weight="bold" text-anchor="middle" fill="#234e52">
                        Bridge Inbound
                    </text>
                    <text x="600" y="445" font-size="10" text-anchor="middle" fill="#2d3748">
                        (Returns to Hub)
                    </text>
                </g>
                
                <!-- Wormhole CCQ Section -->
                <rect x="50" y="520" width="1100" height="220" rx="10" fill="#edf2f7" stroke="#718096" stroke-width="3"/>
                <text x="600" y="550" font-size="18" font-weight="bold" text-anchor="middle" fill="#2d3748">
                    Wormhole Cross-Chain Queries (CCQ) - AUM Aggregation
                </text>
                
                <!-- CCQ Flow -->
                <rect x="100" y="580" width="200" height="80" rx="8" fill="#4299e1" stroke="#2c5282" stroke-width="2"/>
                <text x="200" y="605" font-size="13" font-weight="bold" text-anchor="middle" fill="white">1. Spoke Caliber</text>
                <text x="200" y="625" font-size="10" text-anchor="middle" fill="white">Exposes AUM</text>
                <text x="200" y="640" font-size="10" text-anchor="middle" fill="white">View Function</text>
                
                <rect x="350" y="580" width="200" height="80" rx="8" fill="#48bb78" stroke="#2f855a" stroke-width="2"/>
                <text x="450" y="605" font-size="13" font-weight="bold" text-anchor="middle" fill="white">2. Wormhole</text>
                <text x="450" y="625" font-size="10" text-anchor="middle" fill="white">Guardians Query</text>
                <text x="450" y="640" font-size="10" text-anchor="middle" fill="white">&amp; Sign Data</text>
                
                <rect x="600" y="580" width="200" height="80" rx="8" fill="#f6ad55" stroke="#c05621" stroke-width="2"/>
                <text x="700" y="605" font-size="13" font-weight="bold" text-anchor="middle" fill="white">3. Submit to Hub</text>
                <text x="700" y="625" font-size="10" text-anchor="middle" fill="white">Verified AUM Data</text>
                <text x="700" y="640" font-size="10" text-anchor="middle" fill="white">from All Chains</text>
                
                <rect x="850" y="580" width="200" height="80" rx="8" fill="#805ad5" stroke="#553c9a" stroke-width="2"/>
                <text x="950" y="605" font-size="13" font-weight="bold" text-anchor="middle" fill="white">4. Machine AUM</text>
                <text x="950" y="625" font-size="10" text-anchor="middle" fill="white">Total = Σ All</text>
                <text x="950" y="640" font-size="10" text-anchor="middle" fill="white">Caliber AUMs</text>
                
                <line x1="300" y1="620" x2="350" y2="620" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow6)"/>
                <line x1="550" y1="620" x2="600" y2="620" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow6)"/>
                <line x1="800" y1="620" x2="850" y2="620" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow6)"/>
                
                <rect x="100" y="680" width="950" height="40" rx="5" fill="#fff" stroke="#4299e1" stroke-width="1"/>
                <text x="575" y="705" font-size="11" text-anchor="middle" fill="#2d3748">
                    <tspan font-weight="bold">Result:</tspan> Machine has real-time, verified accounting of all assets across all chains
                </text>
                
                <!-- Oracle Section -->
                <rect x="50" y="770" width="1100" height="180" rx="10" fill="#e6fffa" stroke="#319795" stroke-width="3"/>
                <text x="600" y="800" font-size="18" font-weight="bold" text-anchor="middle" fill="#234e52">
                    Oracle Registry - Price Feeds
                </text>
                
                <rect x="100" y="830" width="300" height="90" rx="8" fill="#fff" stroke="#319795" stroke-width="2"/>
                <text x="250" y="855" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Chainlink Price Feeds</text>
                <text x="250" y="875" font-size="10" text-anchor="middle" fill="#4a5568">Direct feeds (Token → USD)</text>
                <text x="250" y="895" font-size="10" text-anchor="middle" fill="#4a5568">Feed hops (Token A → Token B → USD)</text>
                
                <rect x="450" y="830" width="300" height="90" rx="8" fill="#fff" stroke="#319795" stroke-width="2"/>
                <text x="600" y="855" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Used For</text>
                <text x="600" y="875" font-size="10" text-anchor="middle" fill="#4a5568">• Token balance valuation</text>
                <text x="600" y="895" font-size="10" text-anchor="middle" fill="#4a5568">• Position value calculation</text>
                
                <rect x="800" y="830" width="300" height="90" rx="8" fill="#fff" stroke="#319795" stroke-width="2"/>
                <text x="950" y="855" font-size="13" font-weight="bold" text-anchor="middle" fill="#2d3748">Safety Checks</text>
                <text x="950" y="875" font-size="10" text-anchor="middle" fill="#4a5568">• Value loss verification</text>
                <text x="950" y="895" font-size="10" text-anchor="middle" fill="#4a5568">• Slippage protection</text>
                
                <line x1="400" y1="875" x2="450" y2="875" stroke="#319795" stroke-width="2" marker-end="url(#arrow6)"/>
                <line x1="750" y1="875" x2="800" y2="875" stroke="#319795" stroke-width="2" marker-end="url(#arrow6)"/>
                
                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrow6" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#2d3748"/>
                    </marker>
                    <marker id="arrow7" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#805ad5"/>
                    </marker>
                    <marker id="arrow8" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#f39c12"/>
                    </marker>
                    <marker id="arrow9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#319795"/>
                    </marker>
                </defs>
            </svg>
            
            <div class="legend">
                <h3>Cross-Chain Key Concepts</h3>
                <div class="legend-item">
                    <span class="legend-box" style="background: #f39c12;"></span>
                    <span>Bridge Outbound (Hub → Spoke)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #319795;"></span>
                    <span>Bridge Inbound (Spoke → Hub)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #e53e3e;"></span>
                    <span>Mailbox (Bridge Interface)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-box" style="background: #4299e1;"></span>
                    <span>Wormhole CCQ (Accounting)</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function showDiagram(diagramId) {
            // Hide all diagrams
            document.querySelectorAll('.diagram-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected diagram
            document.getElementById(diagramId).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }
    </script>
</body>
</html>